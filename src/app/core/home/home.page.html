<ion-content [fullscreen]="true">
  <section id="container" class="p-5 flex flex-col justify-between">
    <header class="flex justify-between align-top">
      <app-button-icon [iconName]="'icon-plus'" [routerLink]="'/city'"></app-button-icon>
      <div>
        <h1 class="text-4xl font-bold">{{ this.listCityLabel?.[this.idFocusedCity] }}</h1>
        <div id="swiper-pagination"></div>
      </div>
      <app-button-icon [iconName]="'icon-ellipsis-vertical'" [routerLink]="'/parameter'"></app-button-icon>
      <!-- <app-button-icon id="menu-popover-trigger" [iconName]="'icon-ellipsis-vertical'" [routerLink]="'/parameter'"></app-button-icon>
      <ion-popover trigger="menu-popover-trigger" [dismissOnSelect]="true">
        <ng-template>
          <ion-content>
            <ion-list>
              <ion-item [routerLink]="'/share'" [button]="true" [detail]="false">Partager</ion-item>
              <ion-item [routerLink]="'/parameter'" [button]="true" [detail]="false">Param√®tres</ion-item>
            </ion-list>
          </ion-content>
        </ng-template>
      </ion-popover> -->
    </header>
    <swiper-container *ngIf="(this.currentWeather$ | async | keyvalue) as listCurrentWeather"
      class="w-full flex-grow" [slidesPerView]="1" [loop]="false" [speed]="500" [spaceBetween]="20" [pagination]="this.swiperPagination"
      (slidechangetransitionend)="this.handleSlideChange($event)">
      <swiper-slide *ngFor="let weather of listCurrentWeather"
        class="flex flex-col justify-between">
        <div></div>
        <main>
          <p class="flex justify-center align-top">
            <span class="font-bold text-8xl text-white">
              {{ weather.value.main?.temp | temperatureValue:(this.userSettings$ | async).temperatureUnit | number:'1.0-0' }}
            </span>
            <span class="font-bold text-3xl text-white mt-2 ml-1">
              {{ '' | temperatureUnit:(this.userSettings$ | async).temperatureUnit }}
            </span>
          </p>
          <p class="text-slate-300 font-bold text-xl">
            <span>
              {{ weather.value.weather[0].description | titlecase }}
            </span>
            &nbsp;
            <span>
              {{ weather.value.main.temp_max | temperatureValue:(this.userSettings$ | async).temperatureUnit | number:'1.0-0' | temperatureUnit:(this.userSettings$ | async).temperatureUnit }}
            </span>
            &nbsp;/&nbsp;
            <span>
              {{ weather.value.main.temp_min | temperatureValue:(this.userSettings$ | async).temperatureUnit | number:'1.0-0' | temperatureUnit:(this.userSettings$ | async).temperatureUnit }}
            </span>
          </p>
        </main>
        <app-home-forecast [focusedCityName]="weather.key"></app-home-forecast>
      </swiper-slide>
    </swiper-container>
  </section>
</ion-content>
